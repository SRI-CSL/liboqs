language: c
sudo: require

matrix:
  include:
  - os: linux
    compiler: gcc-4.8
    env: CC=gcc-4.8
    before_install:
      - sudo apt-get -qq update
      - sudo apt-get install -y autotools-dev
      - sudo apt-get install --only-upgrade -y autoconf 
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - gcc-4.8
  - os: linux
    compiler: gcc-4.9
    env: CC=gcc-4.9
    before_install:
      - sudo apt-get -qq update
      - sudo apt-get install -y autotools-dev
      - sudo apt-get install --only-upgrade -y autoconf 
      - sudo apt-get install build-essential
      - sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
      - sudo apt-get update
      - sudo apt-get install gcc-4.9 g++-4.9
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - gcc-4.9
  - os: linux
    compiler: gcc
    env: CC=gcc-5
    before_install:
      - sudo apt-get -qq update
      - sudo apt-get install -y autotools-dev
      - sudo apt-get install --only-upgrade -y autoconf 
      - sudo apt-get install build-essential
      - sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
      - sudo apt-get update
      - sudo apt-get install gcc-5 g++-5
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - gcc-5
        - autotools-dev
        - autoconf
  - os: linux
    compiler: gcc
    env: CC=gcc-6
    before_install:
      - sudo apt-get -qq update
      - sudo apt-get install -y autotools-dev
      - sudo apt-get install --only-upgrade -y autoconf 
      - sudo apt-get install build-essential
      - sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
      - sudo apt-get update
      - sudo apt-get install gcc-6 g++-6
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - gcc-6
        - autotools-dev
        - autoconf
  - os: osx
    compiler: clang
    env: CC=clang
    before_install:
      -  brew install autoconf
      -  brew install automake
  
script:
  - autoreconf -i 
  - ./configure  
  - make 
  - make test
